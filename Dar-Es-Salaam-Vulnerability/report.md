---
layout: page
title: Flood Risk and Food Security in Dar Es Salaam
---
Liam Smith, Middlebury College

Version 1.0 | Created 2021-10-07 | Last Updated 2021-10-12  

## Abstract

This analysis assessed the extent to which residences in Dar Es Salaam, Tanzania, would lose access to food sources in the case of a severe flooding event.
Specifically, I conducted a distance analysis on PostGIS to determine how much the distance from every residence in Dar Es Salaam to the nearest grocery vendor would increase between an everyday scenario and a severe flood scenario.
The results revealed that flooding has minimal impact on food accessibility, except for in a few small regions.
Of the 1,292,622 residences in Dar Es Salaam, only 1,317 of them would be over 500 meters further from a non-flooded grocery vendor in the event of severe flooding.

## Important Links
- [Research Compendium](https://github.com/Liam-W-Smith/Dar-Es-Salaam-Resilience)
- [Interactive Map of my Results in Dar Es Salaam](index.html)

### Keywords

Dar Es Salaam, food security, distance, flood, vulnerability

## Study design

The following analysis is an exploratory study addressing the impacts of extreme flooding on food accessibility in Dar Es Salaam, Tanzania.
The spatial extent of the study is the city of Dar Es Salaam, Tanzania.
(((The **spatial scale / support** of the study is... (???))))
The analysis was conducted based on flood projections and Open Street Map data as of October, 2021.
Thus, the temporal extent of the study is limited to 2021 and a few successive years, and this analysis ought to be updated in following years.
(((The **temporal support** of the study is... (???))))

## Materials and procedure

### Data and variables

[OpenStreetMap](https://www.openstreetmap.org/#map=11/-6.8160/39.1601) is a worldwide open source mapping project, which served as the source of the planet_osm_point and planet_osm_polygon layers used in this analysis.
I found the locations of all of the residences and grocery vendors in Dar Es Salaam using this data source.

[Resilience Academy](https://resilienceacademy.ac.tz/) is an organization which brings several universities in Tanzania together to educate youth about mapping, develop community maps, and assess climate risks.
The Resilience academy served as the source of my wards and flood_scenario layers, which provided information about the location and geometry of governmental subdivisions and potential floods in Dar Es Salaam.

### Geographic characteristics

This analysis is based on the locations of wards, grocery vendors and residences in Dar Es Salaam, as well as the projections of where flooding may occur.
The locations of grocery vendors and residences are open data taken from OpenStreetMap.
As such, the locations have been added over the past couple of years, so they may not all be up to date.
Additionally, they were added to the OpenStreetMap database by a variety of users, and may not be entirely accurate.
The locations of different wards are defined by the government and unlikely to have much error.
It is difficult to discern the accuracy of the flood_scenarios, as they are exactly as accurate and precise as the data providers, Resilience Academy, could make them.
I used a coordinate reference system of ESPG: 32737, and the spatial extent of the analysis is the land area of the city of Dar Es Salaam.

### Data transformations

In order to perform an analysis on the accessibility of grocery vendors to residences in flooded and not-flooded scenarios, I first had to manipulate the given data to make such comparison possible.
The first step was to identify the points and polygons in the OpenStreetMap database that represented food vendors, which I accomplished with the following code:
``` sql
CREATE TABLE foodpoints2 AS
SELECT name, amenity, shop, osm_id, way
FROM planet_osm_point
WHERE amenity = 'marketplace' OR shop IN ('convenience', 'supermarket', 'kiosk', 'bakery', 'butcher', 'greengrocer', 'pastry');

CREATE TABLE foodpolygons AS
SELECT name, amenity, shop, osm_id, way
FROM planet_osm_polygon
WHERE amenity = 'marketplace' OR shop IN ('convenience', 'supermarket', 'kiosk', 'bakery', 'butcher', 'greengrocer', 'pastry');
```

These queries generated two separate tables of the grocery vendors in Dar Es Salaam: one where these sites were recorded as points and one where they were recorded as polygons.
In order to convert the polygon features to point features and combine all of the information into one data table, I used the following query:
``` sql
CREATE TABLE foodsources AS
SELECT name, osm_id, st_transform(way, 32737)::geometry(point, 32737) AS geom FROM foodpoints2
UNION
SELECT name, osm_id, st_transform(st_centroid(way), 32737)::geometry(point,32737) AS geom FROM foodpolygons;
```

I conducted three analogous queries to extract the residences from the OSM data:

```sql
CREATE TABLE residencepoints2 AS
SELECT building, osm_id, way
FROM planet_osm_point
WHERE building IN ('residential', 'yes')

CREATE TABLE residencepolygons AS
SELECT building, osm_id, way
FROM planet_osm_polygon
WHERE building IN ('residential', 'yes')

CREATE TABLE residences AS
SELECT osm_id, st_transform(way, 32737)::geometry(point, 32737) AS geom FROM residencepoints2
UNION
SELECT osm_id, st_transform(st_centroid(way), 32737)::geometry(point,32737) AS geom FROM residencepolygons
```

Later on in my analysis, it will be helpful to know which ward each residence is located within.
I joined the ward information to my table of residences as follows.
```sql
ALTER TABLE residences
ADD COLUMN ward text

UPDATE residences
SET ward = wards.ward_name
FROM wards
WHERE st_contains(wards.utmgeom, residences.geom)
```

I also needed to perform a few operations in order to prepare my flood scenario data for comparison with grocery vendors.
Specifically, I needed to fix the geometry of the flood layer and dissolve the polygons into one feature.

```sql
UPDATE flood
SET geom = st_makevalid(geom);

CREATE TABLE flooddissolve AS
SELECT st_union(geom)::geometry(multipolygon,32737) as geom
FROM flood;
```

### Analysis

Describe the main analysis of the study, e.g. the steps for testing the hypotheses or answering the main research questions.

## Results

Objectively present the results of the study without additional interpretation.

## Discussion

Provide a summary the key findings of the study along with any limitations or areas in need of further investigation. If the study did not succeed as expected, discuss likely practical procedural and informative causes. Practical procedural causes relate to problems in the research procedures, e.g. challenges with data, code, or research parameters. Informative causes relate to problems with the referent geographic phenomena, e.g. absence of the theorized effect(s), change in population, or change in location.

I think I will include [my map](index.html) either here or in the results.

## Conclusions

What are the broader implications of the research results for the environment or society? Do the results suggest the need for future research?

## References
